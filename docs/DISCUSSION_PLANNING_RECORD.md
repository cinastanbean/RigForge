# 需求讨论与计划制定记录（Agent）


## 1. 文档目的

记录 RigForge（锐格锻造坊）Agent 的需求讨论方法、计划拆解方式与执行约定，确保后续迭代连续、可追溯。

## 2. 需求讨论方法

1. 先确认目标与边界：本项目只做装机对话 Agent。
2. 先定义验收标准，再落实现细节。
3. 风险前置：模型限流、超时、会话丢失、误识别。
4. 每个风险给降级方案：模型降级、规则兜底、超时回退。

## 3. 计划制定方法

1. 先做可运行闭环（MVP）。
2. 再做稳定性与可观测（日志、指标、状态透明）。
3. 最后做结构优化（模块解耦、配置外置、测试增强）。

计划粒度约定：

1. 每一步有可验证产物（代码/测试/文档）。
2. 每一步可独立回滚。
3. 代码变更必须同步文档。

## 4. 当前主线（Agent）

1. 对话体验：热情度档位、单轮单问、积极反馈。
2. 需求理解：预算/用途/分辨率/显示器/静音等结构化识别。
3. 推荐与校验：配置生成、兼容检查、替代建议。
4. 模型路由：智谱 -> OpenRouter -> 规则，状态前端可见。
5. 会话与指标：SQLite/Redis 会话存储，指标持久化。

## 5. 执行与验收约定

1. 实施顺序：改代码 -> 跑测试 -> 更新文档。
2. 验收维度：功能正确、异常可降级、维护成本可控。
3. 新需求默认先补测试或补可验证脚本。

## 6. 维护说明

每次新增重要能力时，更新本文件的三项内容：

1. 需求边界
2. 计划顺序
3. 验收标准
